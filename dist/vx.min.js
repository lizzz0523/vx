!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):"object"==typeof exports?exports.vx=n():e.vx=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){function r(e,n,t,r){var o=i.create(n,t,[]),u=i.render(e.gvxId||(e.gvxId=i.gvxId++),o);return r?r!==u&&e.replaceChild(u,r):e.appendChild(u),u}var o=t(1).extend,i=e.exports=function(e,n,t){var o=r(e,n,t,null),i={set:function(t){return o=r(e,n,t,o),i}};return i};o(i,t(2)),o(i,t(4)),o(i,t(9)),o(i,t(8)),i.version="0.0.1",i.gvxId=1},function(e,n){function t(e){return function(n){return s(n)==="[object "+e+"]"}}function r(e){return!v(e)||C(e)||e.nodeType?!1:e.constructor&&!f(e.constructor.prototype,"isPrototypeOf")?!1:!0}function o(e){return void 0===e||null===e}function i(e){var n,t=[];for(n in e)f(e,n)&&t.push(n);return t}function u(e,n){var t,r,o;if(h(e))for(r=-1,o=e.length;++r<o&&n.call(e[r],e[r],r,e)!==!1;);else for(t=i(e),r=-1,o=t.length;++r<o&&n.call(e[t[r]],e[t[r]],t[r],e)!==!1;);}function c(e,n){var t=[];return u(e,function(e,r,o){t.push(n.call(e,e,r,o))}),t}function a(e,n,t){var r=t,i=!0;return u(e,function(e,t,u){i&&o(r)?(r=e,i=!1):r=n.call(e,r,e,t,u)}),r}function l(e){var n=p(arguments,1);return u(n,function(n,t){u(n,function(n,t){e[t]=n})}),e}function d(e,n){return function(){return e.apply(n,arguments)}}var s=function(e){return Object.prototype.toString.call(e)},f=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},p=function(e,n,t){return void 0===t?Array.prototype.slice.call(e,n||0):Array.prototype.slice.call(e,n,t)},h=Array.isArray||t("Array"),v=t("Object"),y=t("Function"),E=t("String"),C=t("Window");n.isArray=h,n.isObject=v,n.isPlainObject=r,n.isFunction=y,n.isString=E,n.isWindow=C,n.isUndefined=o,n.has=f,n.keys=i,n.each=u,n.map=c,n.reduce=a,n.extend=l,n.bind=d},function(e,n,t){var r=t(1).extend;r(n,t(1)),r(n,t(3))},function(e,n,t){var r=t(1);n.createElem=function(e,n){var t=document.createElement(e.toLowerCase());return r.each(n,function(e,n){t.setAttribute(n,e)}),t},n.createText=function(e){var n,t=document.createElement("div");return t.innerHTML=e,n=t.firstChild,t=null,n},n.selectNode=function(e,n){return n?n.querySelector(e):document.querySelector(e)},n.selectNodes=function(e,n){return n?n.querySelectorAll(e):document.querySelectorAll(e)},n.removeNode=function(e){var n=e.parentNode;n&&n.removeChild(e)},n.replaceNode=function(e,n){var t=e.parentNode;t&&t.replaceChild(n,e)},n.appendChild=function(e,n){e.appendChild(n)},n.prependChild=function(e,n){var t=e.firstChild;t?e.insertBefore(n,t):e.appendChild(n)},n.insertBefore=function(e,n){var t=e.parentNode;t&&t.insertBefore(n,e)},n.insertAfter=function(e,n){var t=e.parentNode,r=e.nextSibling;t&&(r?t.insertBefore(n,r):t.appendChild(n))},n.domReady=function(){function e(e){for(var n=-1,t=e.length;++n<t;)e[n](a)}function n(){var n=l;c&&n.length&&(l=[],e(n))}function t(){c||(c=!0,r&&clearInterval(r),n())}var r,o,i,u="undefined"!=typeof window&&window.document,c=!u,a=u?document:null,l=[];if(u){if(document.addEventListener)document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1);else if(window.attachEvent){window.attachEvent("onload",t),o=document.createElement("div");try{i=null===window.frameElement}catch(d){}o.doScroll&&i&&window.external&&(r=setInterval(function(){try{o.doScroll(),t()}catch(e){}},30))}"complete"===document.readyState&&t()}return function(e){c?e(a):l.push(e)}}()},function(e,n,t){var r=t(5),o=t(7),i=t(1),u=function(e,n,t,r){this.id=e,this.name=r,this.state={},this.vnode=null,this.node=null,i.extend(this.state,n),i.extend(this.state,{children:t}),this.update()};i.extend(u.prototype,{set:function(e,n){i.isString(e)?this.state[e]=n:(i.extend(this.state,e),i.extend(this.state,{children:n})),this.update()},render:function(){return this.template?this.template.call(this.state):this.state.children[0]||null},diff:function(e){return r(this.id,this.vnode,e)},apply:function(e){return o(this.id,this.node,e)},update:function(){var e=this.render(),n=this.diff(e),t=this.apply(n);this.vnode=e,this.node=t}}),e.exports=u},function(e,n,t){function r(e,n,t,r,o){var i;return f.each(e.props,function(e,t){var r;t in n.props?(r=n.props[t],e!==r&&(i=i||{},i[t]=r)):(i=i||{},i[t]=void 0)}),f.each(n.props,function(n,t){t in e.props||(i=i||{},i[t]=n)}),i&&(r=c(r,{type:s.PATCH_PROP,vnode:e,patch:i})),r}function o(e,n,t,r,o){for(var i,l,d=a(e.children,n.children),f=d.aChildren,p=d.bChildren,h=-1,v=Math.max(e.count,n.count);++h<v;)i=f[h]||null,l=p[h]||null,o++,!i&&l?r=c(r,{type:s.PATCH_INSERT,vnode:i,patch:l}):u(i,l,t,o),i&&i.count&&(o+=i.count);return d.movePatch&&(r=c(r,{type:s.PATCH_ORDER,vnode:e,patch:d.movePatch})),r}function i(e,n,t,r,o){return(e.props!==n.props||e.children!==n.children)&&(r=c(r,{type:s.PATCH_VIEW,vnode:e,patch:n})),r}function u(e,n,t,u){var a=t[u];e!==n&&(f.isUndefined(n)?a=c(a,{type:s.PATCH_REMOVE,vnode:e,patch:n}):f.isUndefined(e)?a=c(a,{type:s.PATCH_CREATE,vnode:e,patch:n}):f.isString(n)?f.isString(e)&&e===n||(a=c(a,{type:s.PATCH_REPLACE,vnode:e,patch:n})):n.type===s.NODE_ELEM?e.type===s.NODE_ELEM&&e.name===n.name?(a=r(e,n,t,a,u),a=o(e,n,t,a,u)):a=c(a,{type:s.PATCH_REPLACE,vnode:e,patch:n}):n.type===s.NODE_VIEW&&(a=e.type===s.NODE_VIEW&&e.name===n.name?i(e,n,t,a,u):c(a,{type:s.PATCH_REPLACE,vnode:e,patch:n})),a&&(t[u]=a))}function c(e,n){return e?(f.isArray(e)||(e=[e]),e.push(n)):e=n,e}function a(e,n){var t,r,o,i,u,c=l(n),a=c.keys,s=c.free,p=l(e),h=p.keys,v=p.free,y=0,E=s.length,C=0,m=0,A=0,P=[],x=[];if(s.length===n.length)return{aChildren:e,bChildren:n,movePatch:null};if(v.length===e.length)return{aChildren:e,bChildren:n,movePatch:null};for(t=[],f.each(e,function(e,r){e.key?f.has(a,e.key)?t.push(n[a[e.key]]):(C++,t.push(null)):E>y?t.push(n[s[y++]]):(C++,t.push(null))}),r=E>y?s[y]:n.length,f.each(n,function(e,n){e.key?f.has(h,e.key)||t.push(e):n>=r&&t.push(e)}),t=t.concat(n),n=t.splice(0,t.length-n.length),o=n.slice();A<t.length;){for(u=t[A],i=o[m];null===i&&o.length;)P.push(d(o,m,null)),i=o[m];i&&i.key===u.key?(A++,m++):u.key?(i&&i.key&&a[i.key]!==A+1?(P.push(d(o,m,i.key)),i=o[m],i&&i.key===u.key?m++:x.push({key:u.key,to:A})):x.push({key:u.key,to:A}),A++):i&&i.key&&P.push(d(o,m,i.key))}for(;m<o.length;)i=o[m],P.push(d(o,m,i&&i.key));return P.length!==C||x.length?{aChildren:e,bChildren:n,movePatch:{removes:P,inserts:x}}:{aChildren:e,bChildren:n,movePatch:null}}function l(e){for(var n,t={},r=[],o=-1,i=e.length;++o<i;)n=e[o],n.key?t[n.key]=o:r.push(o);return{keys:t,free:r}}function d(e,n,t){return e.splice(n,1),{from:n,key:t}}var s=t(6),f=t(1);e.exports=function(e,n,t){var r={a:n};return u(n,t,r,0),r}},function(e,n){n.NODE_VIEW=1,n.NODE_ELEM=2,n.PATCH_CREATE=3,n.PATCH_REMOVE=4,n.PATCH_REPLACE=5,n.PATCH_INSERT=6,n.PATCH_ORDER=7,n.PATCH_PROP=8,n.PATCH_VIEW=9},function(e,n,t){function r(e,n,t,r){return A.isArray(r)||(r=[r]),A.each(r,function(r){var i=o(e,t,r);t===n&&(n=i)}),n}function o(e,n,t){var r=t.type,o=t.vnode,f=t.patch;switch(r){case C.PATCH_CREATE:return i(e,n,f);case C.PATCH_REMOVE:return u(e,n,f);case C.PATCH_REPLACE:return c(e,n,o,f);case C.PATCH_INSERT:return a(e,n,f);case C.PATCH_ORDER:return l(e,n,f);case C.PATCH_PROP:return d(e,n,f);case C.PATCH_VIEW:return s(e,n,f);default:return n}}function i(e,n,t){var r;return A.isString(t)?r=m.createText(t):t.type===C.NODE_ELEM?(r=m.createElem(t.name,t.props),A.each(t.children,function(t,o){m.appendChild(r,i(e+"."+o,n,t))}),r.vxId=e):t.type===C.NODE_VIEW&&(r=E.render(e,t)),r}function u(e,n,t){return t.type&&t.type===C.NODE_VIEW&&E.destory(n.vxId,t),m.removeNode(n),null}function c(e,n,t,r){var o;return t.type&&t.type===C.NODE_VIEW&&E.destory(n.vxId,t),m.replaceNode(n,o=i(n.vxId,n,r)),o}function a(e,n,t){var r=n.childNodes;return m.appendChild(n,i(n.vxId+"."+r.length,n,t)),n}function l(e,n,t){var r=n.childNodes,o={};return A.each(t.remove,function(e){var t=r[e.from];e.key&&(o[e.key]=t),m.removeNode(n,t)}),A.each(t.inserts,function(e){var n=o[e.key];m.insertBefore(r[e.to],n)}),n}function d(e,n,t){A.each(t,function(e,t){A.isUndefined(e)?n.removeAttribute(t):n.setAttribute(t,e)})}function s(e,n,t){var r;return r=E.render(n.vxId,t)}function f(e){var n,t=[];for(n in e)"a"!==n&&t.push(Number(n));return t}function p(e,n,t){return 0===t.length?{}:h(e,n,0,t.sort(y),{})}function h(e,n,t,r,o){var i,u;return v(r,t,t)&&(o[t]=e||null),e&&n&&n.count&&(e=e.firstChild,i=t,A.each(n.children,function(n,t){i+=1,u=i+(n.count||0),v(r,i,u)&&h(e,n,i,r,o),e=e.nextSibling,i=u})),o}function v(e,n,t){var r,o,i=0,u=e.length-1;if(0===e.length)return!1;for(;u>=i;){if(r=(u+i)/2>>0,o=e[r],i===u)return o>=n&&t>=o;if(n>o)i=r+1;else{if(!(o>t))return!0;u=r-1}}return!1}function y(e,n){return e>n?1:-1}var E=t(8),C=t(6),m=t(3),A=t(1);e.exports=function(e,n,t){var o=f(t),i=p(n,t.a,o);return A.each(o,function(o){n=r(e,n,i[o],t[o])}),n}},function(e,n,t){var r=t(6);t(1);n.cache={},n.render=function(e,t){var o;return t.type!==r.NODE_VIEW?null:(n.cache[e]?(o=n.cache[e],o.set(t.props,t.children)):(o=new t.name(e,t.props,t.children),n.cache[e]=o),o.node)},n.destory=function(e){var t;return vnode.type!==r.NODE_VIEW?null:n.cache[e]?(t=n.cache[e],t.destory(),n.cache[e]=null,null):null}},function(e,n,t){var r=t(4),o=t(6),i=t(1);n.views={},n.view=function(e,t,o){function u(n,t,o){r.call(this,n,t,o,e)}function c(){}c.prototype=r.prototype,u.prototype=new c,t&&i.isFunction(t)&&(t={template:t}),i.extend(u.prototype,t||{}),i.extend(u,o||{}),n.views[e]=u},n.create=function(e,t,r){var u,c,a;return i.isPlainObject(t)||(r=t,t={}),t=i.reduce(t,function(e,n,t){return e[t]=i.isFunction(n)?n():n,e},{}),i.isArray(r)||(r=[r]),r=i.map(r,function(e){return i.isFunction(e)?e():e}),r=i.reduce(r,function(e,n){var t,r;if(!i.isUndefined(n)&&""!==n)if(i.isArray(n))for(t=-1,r=n.length;++t<r;)e.push(n[t]);else e.push(n);return e},[]),e in n.views?(e=n.views[e],u=o.NODE_VIEW,c=t.key,a=0):(u=o.NODE_ELEM,c=t.key,a=r.length,i.each(r,function(e){a+=e.count||0})),{type:u,name:e,props:t,children:r,key:c,count:a}}}])});