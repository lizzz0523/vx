!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):"object"==typeof exports?exports.vx=n():e.vx=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){function r(e,n,t,r){var o=i.create(n,t,[]),u=i.render(e.gvxId||(e.gvxId=i.gvxId++),o);return r?r!==u&&e.replaceChild(u,r):e.appendChild(u),u}var o=t(1).extend,i=e.exports=function(e,n,t){var o=r(e,n,t,null),i={set:function(t){return o=r(e,n,t,o),i}};return i};o(i,t(2)),o(i,t(4)),o(i,t(9)),o(i,t(8)),i.version="0.0.1",i.gvxId=1},function(e,n){function t(e){return function(n){return s(n)==="[object "+e+"]"}}function r(e){return!v(e)||m(e)||e.nodeType?!1:e.constructor&&!f(e.constructor.prototype,"isPrototypeOf")?!1:!0}function o(e){return void 0===e||null===e}function i(e){var n,t=[];for(n in e)f(e,n)&&t.push(n);return t}function u(e,n){var t,r,o;if(h(e))for(r=-1,o=e.length;++r<o&&n.call(e[r],e[r],r,e)!==!1;);else for(t=i(e),r=-1,o=t.length;++r<o&&n.call(e[t[r]],e[t[r]],t[r],e)!==!1;);}function c(e,n){var t=[];return u(e,function(e,r,o){t.push(n.call(e,e,r,o))}),t}function a(e,n,t){var r=t,i=!0;return u(e,function(e,t,u){i&&o(r)?(r=e,i=!1):r=n.call(e,r,e,t,u)}),r}function l(e){var n=p(arguments,1);return u(n,function(n,t){u(n,function(n,t){e[t]=n})}),e}function d(e,n){return function(){return e.apply(n,arguments)}}var s=function(e){return Object.prototype.toString.call(e)},f=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},p=function(e,n,t){return void 0===t?Array.prototype.slice.call(e,n||0):Array.prototype.slice.call(e,n,t)},h=Array.isArray||t("Array"),v=t("Object"),y=t("Function"),E=t("String"),m=t("Window");n.isArray=h,n.isObject=v,n.isPlainObject=r,n.isFunction=y,n.isString=E,n.isWindow=m,n.isUndefined=o,n.has=f,n.keys=i,n.each=u,n.map=c,n.reduce=a,n.extend=l,n.bind=d},function(e,n,t){var r=t(1).extend;r(n,t(1)),r(n,t(3))},function(e,n,t){var r=t(1);n.createElem=function(e,n){var t=document.createElement(e.toLowerCase());return r.each(n,function(e,n){t.setAttribute(n,e)}),t},n.createText=function(e){var n,t=document.createElement("div");return t.innerHTML=e,n=t.firstChild,t=null,n},n.selectNode=function(e,n){return n?n.querySelector(e):document.querySelector(e)},n.selectNodes=function(e,n){return n?n.querySelectorAll(e):document.querySelectorAll(e)},n.removeNode=function(e){var n=e.parentNode;n&&n.removeChild(e)},n.replaceNode=function(e,n){var t=e.parentNode;t&&t.replaceChild(n,e)},n.appendChild=function(e,n){e.appendChild(n)},n.prependChild=function(e,n){var t=e.firstChild;t?e.insertBefore(n,t):e.appendChild(n)},n.insertBefore=function(e,n){var t=e.parentNode;t&&t.insertBefore(n,e)},n.insertAfter=function(e,n){var t=e.parentNode,r=e.nextSibling;t&&(r?t.insertBefore(n,r):t.appendChild(n))},n.domReady=function(){function e(e){for(var n=-1,t=e.length;++n<t;)e[n](a)}function n(){var n=l;c&&n.length&&(l=[],e(n))}function t(){c||(c=!0,r&&clearInterval(r),n())}var r,o,i,u="undefined"!=typeof window&&window.document,c=!u,a=u?document:null,l=[];if(u){if(document.addEventListener)document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1);else if(window.attachEvent){window.attachEvent("onload",t),o=document.createElement("div");try{i=null===window.frameElement}catch(d){}o.doScroll&&i&&window.external&&(r=setInterval(function(){try{o.doScroll(),t()}catch(e){}},30))}"complete"===document.readyState&&t()}return function(e){c?e(a):l.push(e)}}()},function(e,n,t){var r=t(5),o=t(7),i=t(1),u=function(e,n,t,r){this.id=e,this.name=r,this.state={},this.vnode=null,this.node=null,i.extend(this.state,n),i.extend(this.state,{children:t}),this.update()};i.extend(u.prototype,{set:function(e,n){i.isString(e)?this.state[e]=n:(i.extend(this.state,e),i.extend(this.state,{children:n})),this.update()},render:function(){return this.template?this.template.call(this.state):this.state.children[0]||null},diff:function(e){return r(this.id,this.vnode,e)},apply:function(e){return o(this.id,this.node,e)},update:function(){var e=this.render(),n=this.diff(e),t=this.apply(n);this.vnode=e,this.node=t},destory:function(){}}),e.exports=u},function(e,n,t){function r(e,n,t,r,o){var i;return s.each(e.props,function(e,t){var r;t in n.props?(r=n.props[t],e!==r&&(i=i||{},i[t]=r)):(i=i||{},i[t]=void 0)}),s.each(n.props,function(n,t){t in e.props||(i=i||{},i[t]=n)}),i&&(r=c(r,{type:d.PATCH_PROP,vnode:e,patch:i})),r}function o(e,n,t,r,o){for(var i,l,s=a(e.children,n.children),f=s.aChildren,p=s.bChildren,h=-1,v=Math.max(f.length,p.length);++h<v;)i=f[h]||null,l=p[h]||null,o++,!i&&l?r=c(r,{type:d.PATCH_INSERT,vnode:i,patch:l}):u(i,l,t,o),i&&i.count&&(o+=i.count);return s.movePatch&&(r=c(r,{type:d.PATCH_ORDER,vnode:e,patch:s.movePatch})),r}function i(e,n,t,r,o){return(e.props!==n.props||e.children!==n.children)&&(r=c(r,{type:d.PATCH_VIEW,vnode:e,patch:n})),r}function u(e,n,t,u){var a=t[u];e!==n&&(s.isUndefined(n)?a=c(a,{type:d.PATCH_REMOVE,vnode:e,patch:n}):s.isUndefined(e)?a=c(a,{type:d.PATCH_CREATE,vnode:e,patch:n}):s.isString(n)?s.isString(e)&&e===n||(a=c(a,{type:d.PATCH_REPLACE,vnode:e,patch:n})):n.type===d.NODE_ELEM?e.type===d.NODE_ELEM&&e.name===n.name?(a=r(e,n,t,a,u),a=o(e,n,t,a,u)):a=c(a,{type:d.PATCH_REPLACE,vnode:e,patch:n}):n.type===d.NODE_VIEW&&(a=e.type===d.NODE_VIEW&&e.name===n.name?i(e,n,t,a,u):c(a,{type:d.PATCH_REPLACE,vnode:e,patch:n})),a&&(t[u]=a))}function c(e,n){return e?(s.isArray(e)||(e=[e]),e.push(n)):e=n,e}function a(e,n){var t,r,o,i,u,c,a,d,f,p,h,v=l(e),y=v.keys,E=v.free,m=l(n),C=m.keys,A=m.free,P=[],x=[],g=[],_=[];if(A.length===n.length)return{aChildren:e,bChildren:n,movePatch:null};if(E.length===e.length)return{aChildren:e,bChildren:n,movePatch:null};for(i=-1,a=e.length,d=0,f=A.length,h=0;++i<a;)t=e[i],t.key?s.has(C,t.key)?P.push(n[C[t.key]]):(h++,P.push(null)):f>d?P.push(n[A[d++]]):(h++,P.push(null));for(i=-1,a=n.length,p=f>d?A[d]:n.length;++i<a;)r=n[i],r.key?s.has(y,r.key)||P.push(r):i>=p&&P.push(r);for(x=P.slice(),u=0,c=0,a=n.length;a>u;){for(r=n[u],o=P[c];null===o;)_.push({key:null,from:c}),P.splice(c,1),o=P[c];o&&o.key===r.key?(u++,c++):r.key?(o&&o.key?(_.push({key:o.key,from:c}),P.splice(c,1),C[o.key]===u+1&&(r=n[++u],o=P[++c]),g.push({key:r.key,to:u})):g.push({key:r.key,to:u}),u++):o&&o.key&&(_.push({key:o.key,from:c}),P.splice(c,1))}for(;c<P.length;)o=P[c],_.push({key:o&&o.key||null,from:c}),P.splice(c,1);return _.length!==h||g.length?{aChildren:e,bChildren:x,movePatch:{removes:_,inserts:g}}:{aChildren:e,bChildren:x,movePatch:null}}function l(e){for(var n,t={},r=[],o=-1,i=e.length;++o<i;)n=e[o],n.key?t[n.key]=o:r.push(o);return{keys:t,free:r}}var d=t(6),s=t(1);e.exports=function(e,n,t){var r={a:n};return u(n,t,r,0),r}},function(e,n){n.NODE_VIEW=1,n.NODE_ELEM=2,n.PATCH_CREATE=3,n.PATCH_REMOVE=4,n.PATCH_REPLACE=5,n.PATCH_INSERT=6,n.PATCH_ORDER=7,n.PATCH_PROP=8,n.PATCH_VIEW=9},function(e,n,t){function r(e,n,t,r){return A.isArray(r)||(r=[r]),A.each(r,function(r){var i=o(e,t,r);t===n&&(n=i)}),n}function o(e,n,t){var r=t.type,o=t.vnode,f=t.patch;switch(r){case m.PATCH_CREATE:return i(e,n,f);case m.PATCH_REMOVE:return u(e,n,o);case m.PATCH_REPLACE:return c(e,n,o,f);case m.PATCH_INSERT:return a(e,n,f);case m.PATCH_ORDER:return l(e,n,f);case m.PATCH_PROP:return d(e,n,f);case m.PATCH_VIEW:return s(e,n,f);default:return n}}function i(e,n,t){var r;return A.isString(t)?r=C.createText(t):t.type===m.NODE_ELEM?(r=C.createElem(t.name,t.props),A.each(t.children,function(t,o){C.appendChild(r,i(e+"."+o,n,t))}),r.vxId=e):t.type===m.NODE_VIEW&&(r=E.render(e,t)),r}function u(e,n,t){return t.type&&t.type===m.NODE_VIEW&&E.destory(n.vxId,t),C.removeNode(n),null}function c(e,n,t,r){var o;return t.type&&t.type===m.NODE_VIEW&&E.destory(n.vxId,t),C.replaceNode(n,o=i(n.vxId,n,r)),o}function a(e,n,t){var r=n.childNodes;return C.appendChild(n,i(n.vxId+"."+r.length,n,t)),n}function l(e,n,t){var r=n.childNodes,o={};return A.each(t.removes,function(e){var n=r[e.from];e.key&&(o[e.key]=n),C.removeNode(n)}),A.each(t.inserts,function(e){var n=o[e.key];C.insertBefore(r[e.to],n)}),n}function d(e,n,t){A.each(t,function(e,t){A.isUndefined(e)?n.removeAttribute(t):n.setAttribute(t,e)})}function s(e,n,t){var r;return r=E.render(n.vxId,t)}function f(e){var n,t=[];for(n in e)"a"!==n&&t.push(Number(n));return t}function p(e,n,t){return 0===t.length?{}:h(e,n,0,t.sort(y),{})}function h(e,n,t,r,o){var i,u;return v(r,t,t)&&(o[t]=e||null),e&&n&&n.count&&(e=e.firstChild,i=t,A.each(n.children,function(n,t){i+=1,u=i+(n.count||0),v(r,i,u)&&h(e,n,i,r,o),e=e.nextSibling,i=u})),o}function v(e,n,t){var r,o,i=0,u=e.length-1;if(0===e.length)return!1;for(;u>=i;){if(r=(u+i)/2>>0,o=e[r],i===u)return o>=n&&t>=o;if(n>o)i=r+1;else{if(!(o>t))return!0;u=r-1}}return!1}function y(e,n){return e>n?1:-1}var E=t(8),m=t(6),C=t(3),A=t(1);e.exports=function(e,n,t){var o=f(t),i=p(n,t.a,o);return A.each(o,function(o){n=r(e,n,i[o],t[o])}),n}},function(e,n,t){var r=t(6);t(1);n.cache={},n.render=function(e,t){var o;return t.type!==r.NODE_VIEW?null:(n.cache[e]?(o=n.cache[e],o.set(t.props,t.children)):(o=new t.name(e,t.props,t.children),n.cache[e]=o),o.node)},n.destory=function(e,t){var o;return t.type!==r.NODE_VIEW?null:n.cache[e]?(o=n.cache[e],o.destory(),n.cache[e]=null,null):null}},function(e,n,t){var r=t(4),o=t(6),i=t(1);n.views={},n.view=function(e,t,o){function u(n,t,o){r.call(this,n,t,o,e)}function c(){}c.prototype=r.prototype,u.prototype=new c,t&&i.isFunction(t)&&(t={template:t}),i.extend(u.prototype,t||{}),i.extend(u,o||{}),n.views[e]=u},n.create=function(e,t,r){var u,c,a;return i.isPlainObject(t)||(r=t,t={}),i.isArray(r)||(r=[r]),t=i.reduce(t,function(e,n,t){return n=i.isFunction(n)?n():n,e[t]=n,e},{}),r=i.reduce(r,function(e,n){var t,r;if(n=i.isFunction(n)?n():n,!i.isUndefined(n)&&""!==n)if(i.isArray(n))for(t=-1,r=n.length;++t<r;)e.push(n[t]);else e.push(n);return e},[]),e in n.views?(e=n.views[e],u=o.NODE_VIEW,c=t.key,a=0):(u=o.NODE_ELEM,c=t.key,a=r.length,i.each(r,function(e){a+=e.count||0})),{type:u,name:e,props:t,children:r,key:c,count:a}}}])});